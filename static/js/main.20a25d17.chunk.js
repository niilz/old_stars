(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],[,,,,,function(e,t,n){e.exports={User:"UserView_User__3rDU-",icons:"UserView_icons__11hm8",stats:"UserView_stats__3CPgO",beer:"UserView_beer__PMuJ-"}},function(e,t,n){e.exports={itemContent:"ListItem_itemContent__2foXi",userData:"ListItem_userData__2hrne",delBtn:"ListItem_delBtn__2iPsR",count:"ListItem_count__3VfpB"}},function(e,t,n){e.exports={Main:"Main_Main__1r8OT",headerStripes:"Main_headerStripes__GuZIE",title:"Main_title__35ppI",logo:"Main_logo__27Dhq"}},,function(e,t,n){e.exports={Header:"Header_Header__1Mtf7",logo:"Header_logo__3EvUy",headerStripes:"Header_headerStripes__3J_X2",title:"Header_title__3_fub"}},,function(e,t,n){e.exports={RegisterLoginForm:"RegisterLoginForm_RegisterLoginForm__O6GgF",registerBtn:"RegisterLoginForm_registerBtn__OcyVa"}},,function(e,t,n){e.exports={AdminConsole:"AdminConsole_AdminConsole__18Xtx"}},function(e,t,n){e.exports={Playground:"Playground_Playground__2Wbtb"}},function(e,t,n){e.exports={Message:"Message_Message__2PMfH",error:"Message_error__30o9i",info:"Message_info__39PgA",none:"Message_none__18UBm"}},,,function(e,t,n){e.exports={Btn:"Button_Btn__M02Za"}},function(e,t,n){e.exports={AppLogo:"Logo_AppLogo__ASyqM",starotate:"Logo_starotate__3kyPG"}},function(e,t,n){e.exports={UserList:"UserList_UserList__Om7ha"}},,,function(e,t,n){e.exports={LoginForm:"Login_LoginForm__1Sl1n"}},function(e,t,n){e.exports={Modal:"Modal_Modal__JzWj5"}},,,,,,function(e,t,n){},,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r,s,c,a=n(1),o=n.n(a),i=n(17),u=n.n(i),l=(n(30),n(3)),d=n(16),j="http://ec2-3-73-55-110.eu-central-1.compute.amazonaws.com:8000";!function(e){e.GET="GET",e.POST="POST",e.DELETE="DELETE",e.HEAD="HEAD",e.OPTIONS="OPTIONS"}(r||(r={})),function(e){e[e.LoggedInClub=0]="LoggedInClub",e[e.LoggedInAdmin=1]="LoggedInAdmin",e[e.LoggedInUser=2]="LoggedInUser",e[e.LoggedOut=3]="LoggedOut",e[e.LoginError=4]="LoginError"}(s||(s={})),function(e){e[e.Club=0]="Club",e[e.User=1]="User",e[e.Admin=2]="Admin",e[e.None=3]="None"}(c||(c={}));var b=n(25),O=n(2),g=n.n(O),f=n(4),p=new Headers;function h(e,t,n){return m.apply(this,arguments)}function m(){return(m=Object(f.a)(g.a.mark((function e(t,n,s){var c,a,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:t,headers:p,mode:"cors",cache:"default"},t===r.POST&&(c.body=s),e.next=4,fetch("".concat(j,"/").concat(n),c);case 4:return a=e.sent,e.next=7,a.json();case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){var t=e.Ok,n=e.Err;if(t)return t;throw"Ooops... ".concat(n)}function _(e){return L.apply(this,arguments)}function L(){return(L=Object(f.a)(g.a.mark((function e(t){var n,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(r.POST,"register",JSON.stringify(t));case 2:return n=e.sent,s=x(n),e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return w.apply(this,arguments)}function w(){return(w=Object(f.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h(r.GET,"all",""));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}p.set("Accept","application/json"),p.set("Content-Type","application/json");var y=n(18),U=n.n(y),C=n(0);function N(e){return Object(C.jsx)("button",{className:"".concat(U.a.Btn," ").concat(e.styles),onClick:e.callback,children:e.text})}var S=n(19),E=n.n(S);function A(e){return Object(C.jsx)("div",{className:"".concat(E.a.AppLogo," ").concat(e.styles),children:"\u2b50"})}var T=n(9),I=n.n(T);function M(e){return Object(C.jsxs)("header",{className:I.a.Header,children:[e.showLogo?Object(C.jsx)(A,{styles:I.a.logo}):null,Object(C.jsx)("div",{className:"".concat(I.a.headerStripes," ").concat(e.styles?e.styles.headerStripes:""),children:Object(C.jsx)("h1",{className:"".concat(I.a.title," ").concat(e.styles?e.styles.title:""),children:"Old-Stars App"})})]})}var k=n(6),P=n.n(k);function F(e){return Object(C.jsxs)("tr",{className:P.a.itemContent,children:[Object(C.jsx)("td",{children:Object(C.jsx)("div",{className:P.a.userData,children:e.user.name})}),Object(C.jsx)("td",{className:P.a.count,children:e.user.beerCount}),Object(C.jsx)("td",{className:P.a.count,children:e.user.shotCount}),Object(C.jsx)("td",{className:P.a.count,children:e.user.waterCount}),e.isEditable?Object(C.jsx)("td",{children:Object(C.jsx)("button",{className:P.a.delBtn,onClick:e.deleteGotClicked,children:"\u274c"})}):null]})}var B=n(20),D=n.n(B);function H(e){return Object(C.jsxs)("table",{className:D.a.UserList,children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{}),Object(C.jsx)("th",{children:"\ud83c\udf7a"}),Object(C.jsx)("th",{children:"\ud83e\udd43"}),Object(C.jsx)("th",{children:"\ud83d\udeb0"})]})}),Object(C.jsx)("tbody",{children:e.users.map((function(t){return Object(C.jsx)(F,{id:t.id,user:t,isEditable:e.isEditable,deleteGotClicked:function(){return e.onDelete?e.onDelete(t.id):null}},t.id)}))})]})}var R=n(13),V=n.n(R);function G(e){return Object(C.jsxs)("div",{className:V.a.AdminConsole,children:[Object(C.jsx)(M,{showLogo:!0}),Object(C.jsx)(H,{users:e.users,isEditable:!0,onDelete:function(t){!function(e){h(r.DELETE,"delete/".concat(e),"")}(t),e.onDelete(t)}}),Object(C.jsx)(N,{text:"Home",styles:V.a.Btn,callback:e.navToHome})]})}var J=n(14),X=n.n(J),q=n(5),z=n.n(q);function W(e){var t=function(){var t=Object(f.a)(g.a.mark((function t(n){var s,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(r.GET,"".concat(n,"/").concat(e.user.id),"");case 2:s=t.sent,c=x(s),e.onUserUpdate(c);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(C.jsxs)("div",{className:z.a.User,children:[Object(C.jsx)("p",{className:z.a.name,children:e.user.name}),Object(C.jsxs)("div",{className:z.a.statsPanel,children:[Object(C.jsxs)("div",{className:z.a.icons,children:[Object(C.jsx)("button",{onClick:function(){return t("beer")},className:z.a.beer,children:"\ud83c\udf7a"}),Object(C.jsx)("button",{onClick:function(){return t("shot")},className:z.a.shots,children:"\ud83e\udd43"}),Object(C.jsx)("button",{onClick:function(){return t("water")},className:z.a.water,children:"\ud83d\udeb0"})]}),Object(C.jsxs)("div",{className:z.a.stats,children:[Object(C.jsx)("p",{className:z.a.count,children:e.user.beerCount}),Object(C.jsx)("p",{className:z.a.count,children:e.user.shotCount}),Object(C.jsx)("p",{className:z.a.count,children:e.user.waterCount})]})]})]})}function Z(e){return Object(C.jsxs)("div",{className:X.a.Playground,children:[Object(C.jsx)(M,{showLogo:!0}),Object(C.jsx)(W,{user:e.user,onUserUpdate:e.onUserUpdate}),Object(C.jsx)(H,{users:e.users,isEditable:!1}),Object(C.jsx)(N,{text:"logout",styles:X.a.Btn,callback:e.logout})]})}var K=n(7),Q=n.n(K),Y=o.a.createContext({addUser:function(e){},setSessionUser:function(e){}}),$=o.a.createContext({loginState:s.LoggedOut,setLoginState:function(e){}});function ee(){var e=Object(a.useState)(new Array),t=Object(l.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(null),i=Object(l.a)(o,2),u=i[0],d=i[1],j=Object(a.useState)(s.LoggedOut),O=Object(l.a)(j,2),p=O[0],h=O[1],m=Object(a.useContext)(ve),_=m.setLoginType,L=m.isAdminViewOpen,w=m.setAdminViewOpen,y=m.setAdminLoginOpen;Object(a.useEffect)((function(){(function(){var e=Object(f.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:t=e.sent,n=x(t),r(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var U,S;return Object(C.jsx)($.Provider,{value:{loginState:p,setLoginState:h},children:Object(C.jsx)("div",{className:Q.a.Main,children:L?Object(C.jsx)(G,{navToHome:function(){w(!1),_(u?c.None:c.User),h(u?s.LoggedInUser:s.LoggedInClub)},users:n,onDelete:function(e){var t=n.filter((function(t){return t.id!==e}));r(t)}}):Object(C.jsxs)(C.Fragment,{children:[(U=L,S=p,!U&&S!==s.LoggedInUser&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(M,{showLogo:!1,styles:{headerStripes:Q.a.headerStripes,title:Q.a.title}}),Object(C.jsx)(A,{styles:Q.a.logo})]})),Object(C.jsx)(Y.Provider,{value:{addUser:function(e){var t=[].concat(Object(b.a)(n),[e]);r(t)},setSessionUser:d},children:u&&te(p,u)?Object(C.jsx)(Z,{user:u,users:n,logout:function(){h(s.LoggedInClub),_(c.User),d(null),w(!1)},onUserUpdate:function(e){var t=n.map((function(t){return t.id===e.id?e:t}));r(t),d(e)}}):Object(C.jsx)(me,{onLogin:h})}),!L&&Object(C.jsx)(N,{text:"admin",styles:Q.a.Btn,callback:function(){y(!0),_(c.Admin)}})]})})})}function te(e,t){return e===s.LoggedInUser&&t}var ne,re=n(15),se=n.n(re);function ce(e){return Object(C.jsx)("p",{className:"".concat(se.a.Message," ").concat(se.a[e.type]),children:e.msg})}!function(e){e.ERR="error",e.INFO="info",e.NONE="none"}(ne||(ne={}));var ae=n(21),oe=n(22),ie=function(){function e(){Object(ae.a)(this,e)}return Object(oe.a)(e,null,[{key:"loginUser",value:function(){var e=Object(f.a)(g.a.mark((function e(t){var n,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(r.POST,"login",JSON.stringify(t));case 2:return n=e.sent,s=x(n),e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ue=n(11),le=n.n(ue),de=document.documentElement,je=Math.floor(window.innerHeight/3.5);function be(e){var t=Object(a.useContext)(ve),n=t.loginType,r=t.setLoginType,o=Object(a.useContext)(Y).setSessionUser,i=Object(a.useState)(""),u=Object(l.a)(i,2),d=u[0],j=u[1],b=Object(a.useState)(""),O=Object(l.a)(b,2),p=O[0],h=O[1],m=function(){var t=Object(f.a)(g.a.mark((function t(){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_({name:d,pwd:p});case 3:n=t.sent,e.onRegister(n),j(""),h(""),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.onError(ne.ERR,t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("form",{onFocus:function(e){e.target instanceof HTMLInputElement&&(de&&de.classList.add("shifted"),window.scroll(0,je))},onBlur:function(e){e.target instanceof HTMLInputElement&&(de&&de.classList.remove("shifted"),window.scroll(0,0))},onSubmit:Oe,className:"".concat(le.a.RegisterLoginForm," ").concat(n===c.User?e.styles:""),children:[n===c.User&&Object(C.jsx)("input",{type:"text",placeholder:"user-name",value:d,onChange:function(e){return j(e.target.value)}}),Object(C.jsx)("input",{type:"password",value:p,placeholder:fe(n),onChange:function(e){return h(e.target.value)}}),Object(C.jsx)(N,{text:"Login",styles:le.a.registerBtn,callback:function(){ie.loginUser({name:d||ge(n),pwd:p}).then((function(t){var a=function(e){switch(e){case c.User:return s.LoggedInUser;case c.Club:return s.LoggedInClub;case c.Admin:return s.LoggedInAdmin;default:throw"Unhandled loginTyp: ".concat(e,". Cannot evaluate a LoginState")}}(n);e.onLogin(a),j(""),h(""),r(function(e){switch(e){case c.Club:return c.User;case c.User:case c.Admin:return c.None;default:throw"Unsupported LoginType-State"}}(n)),n===c.User&&o(t)})).catch((function(t){return e.onError(ne.ERR,t)}))}}),n===c.User&&Object(C.jsx)(N,{text:"Register",styles:le.a.registerBtn,callback:m})]})})}function Oe(e){e.preventDefault()}function ge(e){switch(e){case c.Club:return"club";case c.Admin:return"admin";default:throw"Cannot evaluate the Login Name if the userName is undefined"}}function fe(e){return"".concat(c[e]," Password")}var pe=n(23),he=n.n(pe);function me(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(ne.NONE),i=Object(l.a)(o,2),u=i[0],j=i[1],b=Object(a.useContext)(Y).addUser;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(ce,{msg:r,type:u}),Object(C.jsx)(be,Object(d.a)(Object(d.a)({},e),{},{onRegister:function(e){c("Registration was successful"),j(ne.INFO),b(e)},onLogin:function(t){t!==s.LoginError&&(c(""),j(ne.NONE)),e.onLogin(t)},onError:function(e,t){c(t),j(e)},styles:he.a.LoginForm}))]})}n(33);var xe=n(24),_e=n.n(xe);function Le(e){return Object(C.jsx)("div",{className:_e.a.Modal,children:e.children})}var ve=o.a.createContext({isAdminLoginOpen:!1,setAdminLoginOpen:function(e){},isAdminViewOpen:!1,setAdminViewOpen:function(e){},loginType:c.Club,setLoginType:function(e){}});var we=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(!1),i=Object(l.a)(o,2),u=i[0],d=i[1],j=Object(a.useState)(c.Club),b=Object(l.a)(j,2),O=b[0],g=b[1];return Object(C.jsxs)(ve.Provider,{value:{isAdminLoginOpen:n,setAdminLoginOpen:r,isAdminViewOpen:u,setAdminViewOpen:d,loginType:O,setLoginType:g},children:[Object(C.jsx)(ee,{}),n&&Object(C.jsx)(Le,{children:Object(C.jsx)(me,{onLogin:function(e){if(e!==s.LoggedInAdmin)throw"Only Admin should be able to log in as admin";r(!1),d(!0)}})})]})},ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,35)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),s(e),c(e),a(e)}))};u.a.render(Object(C.jsx)(o.a.StrictMode,{children:Object(C.jsx)(we,{})}),document.getElementById("root")),ye()}],[[34,1,2]]]);
//# sourceMappingURL=main.20a25d17.chunk.js.map