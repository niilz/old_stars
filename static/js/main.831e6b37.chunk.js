(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],[,,,,,function(e,t,n){e.exports={User:"UserView_User__3rDU-",icons:"UserView_icons__11hm8",stats:"UserView_stats__3CPgO",beer:"UserView_beer__PMuJ-"}},,function(e,t,n){e.exports={itemContent:"ListItem_itemContent__2foXi",userData:"ListItem_userData__2hrne",delBtn:"ListItem_delBtn__2iPsR",count:"ListItem_count__3VfpB"}},function(e,t,n){e.exports={Main:"Main_Main__1r8OT",headerStripes:"Main_headerStripes__GuZIE",title:"Main_title__35ppI",logo:"Main_logo__27Dhq"}},,function(e,t,n){e.exports={Header:"Header_Header__1Mtf7",logo:"Header_logo__3EvUy",headerStripes:"Header_headerStripes__3J_X2",title:"Header_title__3_fub"}},function(e,t,n){e.exports={Playground:"Playground_Playground__2Wbtb",buttons:"Playground_buttons__uzU7s",refresh:"Playground_refresh__B2RZy"}},,,,,function(e,t,n){e.exports={RegisterLoginForm:"RegisterLoginForm_RegisterLoginForm__O6GgF",registerBtn:"RegisterLoginForm_registerBtn__OcyVa"}},function(e,t,n){e.exports={UserList:"UserList_UserList__Om7ha",TableArea:"UserList_TableArea__3Ee2p"}},function(e,t,n){e.exports={AdminConsole:"AdminConsole_AdminConsole__18Xtx"}},function(e,t,n){e.exports={warningWrapper:"WaterRoundWarning_warningWrapper__3OR5P",warning:"WaterRoundWarning_warning__3bB3M"}},function(e,t,n){e.exports={Message:"Message_Message__2PMfH",error:"Message_error__30o9i",info:"Message_info__39PgA",none:"Message_none__18UBm"}},,,,function(e,t,n){e.exports={Btn:"Button_Btn__M02Za"}},function(e,t,n){e.exports={AppLogo:"Logo_AppLogo__ASyqM",starotate:"Logo_starotate__3kyPG"}},function(e,t,n){e.exports={Modal:"Modal_Modal__JzWj5"}},function(e,t,n){e.exports={LoginForm:"Login_LoginForm__1Sl1n"}},,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r,s,a,c=n(1),o=n.n(c),i=n(23),u=(n(37),n(4)),l=n(21),d="https://niilz.de",j="old-star-user-session";!function(e){e.GET="GET",e.POST="POST",e.DELETE="DELETE",e.HEAD="HEAD",e.OPTIONS="OPTIONS"}(r||(r={})),function(e){e[e.LoggedInClub=0]="LoggedInClub",e[e.LoggedInAdmin=1]="LoggedInAdmin",e[e.LoggedInUser=2]="LoggedInUser",e[e.LoggedOut=3]="LoggedOut",e[e.LoginError=4]="LoginError"}(s||(s={})),function(e){e[e.Club=0]="Club",e[e.User=1]="User",e[e.Admin=2]="Admin",e[e.None=3]="None"}(a||(a={}));var b=n(28),O=n(2),p=n(3),f=new Headers;function h(e,t,n,r){return g.apply(this,arguments)}function g(){return(g=Object(p.a)(Object(O.a)().mark((function e(t,n,s,a){var c,o,i,u;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=f,a&&c.set("".concat(j),a),o={method:t,headers:c,mode:"cors",cache:"default",credentials:"include"},t===r.POST&&(o.body=s),e.next=6,fetch("".concat(d,"/").concat(n),o);case 6:return i=e.sent,e.next=9,i.json();case 9:return u=e.sent,e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){var t=e.Ok,n=e.Err;if(t)return t;throw"Ooops... ".concat(n)}function m(e){return _.apply(this,arguments)}function _(){return(_=Object(p.a)(Object(O.a)().mark((function e(t){var n,s;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(r.POST,"register",JSON.stringify(t));case 2:return n=e.sent,s=x(n),e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return w.apply(this,arguments)}function w(){return(w=Object(p.a)(Object(O.a)().mark((function e(){return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h(r.GET,"all",""));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return y.apply(this,arguments)}function y(){return(y=Object(p.a)(Object(O.a)().mark((function e(t){return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h(r.GET,"start","",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return U.apply(this,arguments)}function U(){return(U=Object(p.a)(Object(O.a)().mark((function e(){return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h(r.GET,"logout",""));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}f.set("Accept","application/json"),f.set("Content-Type","application/json");var N=n(24),A=n.n(N),S=n(0);function E(e){return Object(S.jsx)("button",{className:"".concat(A.a.Btn," ").concat(e.styles),onClick:e.callback,children:e.text})}var T=n(25),k=n.n(T);function I(e){return Object(S.jsx)("div",{className:"".concat(k.a.AppLogo," ").concat(e.styles),children:"\u2b50"})}var R=n(10),M=n.n(R);function P(e){Object(c.useContext)(Ae).appHeight;return Object(S.jsxs)("header",{className:M.a.Header,children:[e.showLogo?Object(S.jsx)(I,{styles:M.a.logo}):null,Object(S.jsx)("div",{className:"".concat(M.a.headerStripes," ").concat(e.styles?e.styles.headerStripes:""),children:Object(S.jsx)("h1",{className:"".concat(M.a.title," ").concat(e.styles?e.styles.title:""),children:"Old-Stars App"})})]})}var B=n(7),F=n.n(B);function H(e){return Object(S.jsxs)("tr",{className:F.a.itemContent,children:[Object(S.jsx)("td",{children:Object(S.jsx)("div",{className:F.a.userData,children:e.user.name})}),Object(S.jsx)("td",{className:F.a.count,children:e.user.beerCount}),Object(S.jsx)("td",{className:F.a.count,children:e.user.shotCount}),Object(S.jsx)("td",{className:F.a.count,children:e.user.waterCount}),e.isEditable?Object(S.jsx)("td",{children:Object(S.jsx)("button",{className:F.a.delBtn,onClick:e.deleteGotClicked,children:"\u274c"})}):null]})}var D=n(17),W=n.n(D);function G(e){return Object(S.jsx)("div",{className:W.a.TableArea,children:Object(S.jsxs)("table",{className:W.a.UserList,children:[Object(S.jsx)("thead",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("th",{}),Object(S.jsx)("th",{children:"\ud83c\udf7a"}),Object(S.jsx)("th",{children:"\ud83e\udd43"}),Object(S.jsx)("th",{children:"\ud83d\udeb0"})]})}),Object(S.jsx)("tbody",{children:e.users.map((function(t){return Object(S.jsx)(H,{id:t.id,user:t,isEditable:e.isEditable,deleteGotClicked:function(){return e.onDelete?e.onDelete(t.id):null}},t.id)}))})]})})}var V=n(18),J=n.n(V);function X(e){return Object(S.jsxs)("div",{className:J.a.AdminConsole,children:[Object(S.jsx)(P,{showLogo:!0}),Object(S.jsx)(G,{users:e.users,isEditable:!0,onDelete:function(t){!function(e){h(r.DELETE,"delete/".concat(e),"")}(t),e.onDelete(t)}}),Object(S.jsx)(E,{text:"Home",styles:J.a.Btn,callback:e.navToHome})]})}var z=n(11),Z=n.n(z),q=n(13),K=n(14),Q=function(){function e(t){Object(q.a)(this,e),this.id=void 0,this.name=void 0,this.pwd=void 0,this.beerCount=void 0,this.shotCount=void 0,this.waterCount=void 0,this.id=t.id,this.name=t.name,this.pwd=t.pwd,this.beerCount=t.beerCount,this.shotCount=t.shotCount,this.waterCount=t.waterCount}return Object(K.a)(e,[{key:"needsWaterRound",value:function(){return(this.beerCount+this.shotCount)/this.waterCount>e.MAX_ALC_TO_WATER_RATIO}}]),e}();Q.MAX_ALC_TO_WATER_RATIO=3;var Y=n(5),$=n.n(Y);function ee(e){var t=function(){var t=Object(p.a)(Object(O.a)().mark((function t(n){var s,a;return Object(O.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(r.GET,"".concat(n,"/").concat(e.user.id),"");case 2:s=t.sent,a=x(s),e.onUserUpdate(a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:$.a.User,children:[Object(S.jsx)("p",{className:$.a.name,children:e.user.name}),Object(S.jsxs)("div",{className:$.a.statsPanel,children:[Object(S.jsxs)("div",{className:$.a.icons,children:[Object(S.jsx)("button",{onClick:function(){return t("beer")},className:$.a.beer,children:"\ud83c\udf7a"}),Object(S.jsx)("button",{onClick:function(){return t("shot")},className:$.a.shots,children:"\ud83e\udd43"}),Object(S.jsx)("button",{onClick:function(){return t("water")},className:$.a.water,children:"\ud83d\udeb0"})]}),Object(S.jsxs)("div",{className:$.a.stats,children:[Object(S.jsx)("p",{className:$.a.count,children:e.user.beerCount}),Object(S.jsx)("p",{className:$.a.count,children:e.user.shotCount}),Object(S.jsx)("p",{className:$.a.count,children:e.user.waterCount})]})]})]})}var te=n(26),ne=n.n(te);function re(e){var t=Object(c.useContext)(Ae).appHeight;return Object(S.jsx)("div",{className:ne.a.Modal,style:{height:t},children:e.children})}var se=n(19),ae=n.n(se);function ce(e){var t=function(){var t=Object(p.a)(Object(O.a)().mark((function t(){var n,s;return Object(O.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(r.GET,"water/".concat(e.userId),"");case 2:n=t.sent,s=x(n),e.onWaterConsumed(s);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:ae.a.warningWrapper,children:[Object(S.jsx)("p",{className:ae.a.warning,children:"Du musst eine Wasserrunde trinken"}),Object(S.jsx)(E,{text:"Wasser getrunken",styles:"",callback:t})]})}function oe(e){var t=new Q(e.user);return Object(S.jsxs)(S.Fragment,{children:[t.needsWaterRound()&&Object(S.jsx)(re,{children:Object(S.jsx)(ce,{userId:e.user.id,onWaterConsumed:e.onUserUpdate})}),Object(S.jsxs)("div",{className:Z.a.Playground,children:[Object(S.jsx)(P,{showLogo:!0}),Object(S.jsx)(ee,{user:e.user,onUserUpdate:e.onUserUpdate}),Object(S.jsx)(G,{users:e.users,isEditable:!1}),Object(S.jsxs)("div",{className:Z.a.buttons,children:[Object(S.jsx)(E,{text:"logout",styles:Z.a.Btn,callback:e.logout}),Object(S.jsx)(E,{text:"\ud83d\udd04",styles:Z.a.refresh,callback:e.onRefresh})]})]})]})}var ie=n(8),ue=n.n(ie),le=o.a.createContext({addUser:function(e){},setSessionUser:function(e){}}),de=o.a.createContext({loginState:s.LoggedOut,setLoginState:function(e){}});function je(){var e=Object(c.useState)(new Array),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(null),i=Object(u.a)(o,2),l=i[0],d=i[1],f=Object(c.useState)(s.LoggedOut),h=Object(u.a)(f,2),g=h[0],m=h[1],_=Object(c.useContext)(Ae),w=_.setLoginType,y=_.isAdminViewOpen,U=_.setAdminViewOpen,N=_.setAdminLoginOpen;Object(c.useEffect)((function(){var e=function(){var e=Object(p.a)(Object(O.a)().mark((function e(){var t,n;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:t=e.sent,n=x(t),r(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(c.useEffect)((function(){var e=function(){var e=Object(p.a)(Object(O.a)().mark((function e(t){var n,r;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t);case 2:n=e.sent,(r=x(n))&&(d(r),m(s.LoggedInUser));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=window.localStorage.getItem(j);t&&e(t)}),[]);var A,T,k=function(){var e=Object(p.a)(Object(O.a)().mark((function e(){return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:e.sent&&(m(s.LoggedInClub),w(a.User),d(null),U(!1));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(p.a)(Object(O.a)().mark((function e(){var t,n;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:t=e.sent,n=x(t),r(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsx)(de.Provider,{value:{loginState:g,setLoginState:m},children:Object(S.jsx)("div",{className:ue.a.Main,children:y?Object(S.jsx)(X,{navToHome:function(){U(!1),w(l?a.None:a.User),m(l?s.LoggedInUser:s.LoggedInClub)},users:n,onDelete:function(e){var t=n.filter((function(t){return t.id!==e}));r(t)}}):Object(S.jsxs)(S.Fragment,{children:[(A=y,T=g,!A&&T!==s.LoggedInUser&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(P,{showLogo:!1,styles:{headerStripes:ue.a.headerStripes,title:ue.a.title}}),Object(S.jsx)(I,{styles:ue.a.logo})]})),Object(S.jsx)(le.Provider,{value:{addUser:function(e){var t=[].concat(Object(b.a)(n),[e]);r(t)},setSessionUser:d},children:l&&be(g,l)?Object(S.jsx)(oe,{user:l,users:n,logout:k,onUserUpdate:function(e){var t=n.map((function(t){return t.id===e.id?e:t}));r(t),d(e)},onRefresh:R}):Object(S.jsx)(Ne,{onLogin:m})}),!y&&Object(S.jsx)(E,{text:"admin",styles:ue.a.Btn,callback:function(){N(!0),w(a.Admin)}})]})})})}function be(e,t){return e===s.LoggedInUser&&t}var Oe,pe=n(20),fe=n.n(pe);function he(e){return Object(S.jsx)("p",{className:"".concat(fe.a.Message," ").concat(fe.a[e.type]),children:e.msg})}!function(e){e.ERR="error",e.INFO="info",e.NONE="none"}(Oe||(Oe={}));var ge=function(){function e(){Object(q.a)(this,e)}return Object(K.a)(e,null,[{key:"loginUser",value:function(){var e=Object(p.a)(Object(O.a)().mark((function e(t){var n,s;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(r.POST,"login",JSON.stringify(t));case 2:return n=e.sent,s=x(n),e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),xe=ge,me=n(16),_e=n.n(me);function ve(e){var t=Object(c.useContext)(Ae),n=t.loginType,r=t.setLoginType,o=Object(c.useContext)(le).setSessionUser,i=Object(c.useState)(""),l=Object(u.a)(i,2),d=l[0],b=l[1],f=Object(c.useState)(""),h=Object(u.a)(f,2),g=h[0],x=h[1],_=function(){var t=Object(p.a)(Object(O.a)().mark((function t(){var n;return Object(O.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m({name:d,pwd:g});case 3:n=t.sent,e.onRegister(n),b(""),x(""),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.onError(Oe.ERR,t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("form",{onSubmit:we,className:"".concat(_e.a.RegisterLoginForm," ").concat(n===a.User?e.styles:""),children:[n===a.User&&Object(S.jsx)("input",{type:"text",placeholder:"user-name",value:d,onChange:function(e){return b(e.target.value)}}),Object(S.jsx)("input",{type:"password",value:g,placeholder:ye(n),onChange:function(e){return x(e.target.value)}}),Object(S.jsx)(E,{text:"Login",styles:_e.a.registerBtn,callback:function(){xe.loginUser({name:d||Le(n),pwd:g}).then((function(t){var c=function(e){switch(e){case a.User:return s.LoggedInUser;case a.Club:return s.LoggedInClub;case a.Admin:return s.LoggedInAdmin;default:throw"Unhandled loginTyp: ".concat(e,". Cannot evaluate a LoginState")}}(n);if(e.onLogin(c),b(""),x(""),r(function(e){switch(e){case a.Club:return a.User;case a.User:case a.Admin:return a.None;default:throw"Unsupported LoginType-State"}}(n)),n===a.User){var i=t;o(i.user),window.localStorage.setItem(j,i.sessionId)}})).catch((function(t){return e.onError(Oe.ERR,t)}))}}),n===a.User&&Object(S.jsx)(E,{text:"Register",styles:_e.a.registerBtn,callback:_})]})})}function we(e){e.preventDefault()}function Le(e){switch(e){case a.Club:return"club";case a.Admin:return"admin!";default:throw"Cannot evaluate the Login Name if the userName is undefined"}}function ye(e){return"".concat(a[e]," Password")}var Ce=n(27),Ue=n.n(Ce);function Ne(e){var t=Object(c.useState)(""),n=Object(u.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)(Oe.NONE),i=Object(u.a)(o,2),d=i[0],j=i[1],b=Object(c.useContext)(le).addUser;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(he,{msg:r,type:d}),Object(S.jsx)(ve,Object(l.a)(Object(l.a)({},e),{},{onRegister:function(e){a("Registration was successful"),j(Oe.INFO),b(e)},onLogin:function(t){t!==s.LoginError&&(a(""),j(Oe.NONE)),e.onLogin(t)},onError:function(e,t){a(t),j(e)},styles:Ue.a.LoginForm}))]})}n(39);var Ae=o.a.createContext({isAdminLoginOpen:!1,setAdminLoginOpen:function(e){},isAdminViewOpen:!1,setAdminViewOpen:function(e){},loginType:a.Club,setLoginType:function(e){},appHeight:0});var Se=function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(!1),i=Object(u.a)(o,2),l=i[0],d=i[1],j=Object(c.useState)(a.Club),b=Object(u.a)(j,2),O=b[0],p=b[1],f=Object(c.useState)(window.innerHeight),h=Object(u.a)(f,2),g=h[0];return h[1],Object(S.jsx)(Ae.Provider,{value:{isAdminLoginOpen:n,setAdminLoginOpen:r,isAdminViewOpen:l,setAdminViewOpen:d,loginType:O,setLoginType:p,appHeight:g},children:Object(S.jsxs)("div",{className:"App",style:{height:g},children:[Object(S.jsx)(je,{}),n&&Object(S.jsx)(re,{children:Object(S.jsx)(Ne,{onLogin:function(e){if(e!==s.LoggedInAdmin)throw"Only Admin should be able to log in as admin";r(!1),d(!0)}})})]})})},Ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),a(e),c(e)}))},Te=document.getElementById("root");Object(i.createRoot)(Te).render(Object(S.jsx)(o.a.StrictMode,{children:Object(S.jsx)(Se,{})})),Ee()}],[[40,1,2]]]);
//# sourceMappingURL=main.831e6b37.chunk.js.map