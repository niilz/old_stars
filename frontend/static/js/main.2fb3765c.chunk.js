(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],[,,,,,function(e,t,n){e.exports={User:"UserView_User__3rDU-",icons:"UserView_icons__11hm8",stats:"UserView_stats__3CPgO",beer:"UserView_beer__PMuJ-"}},function(e,t,n){e.exports={itemContent:"ListItem_itemContent__2foXi",userData:"ListItem_userData__2hrne",delBtn:"ListItem_delBtn__2iPsR",count:"ListItem_count__3VfpB"}},function(e,t,n){e.exports={Main:"Main_Main__1r8OT",headerStripes:"Main_headerStripes__GuZIE",title:"Main_title__35ppI",logo:"Main_logo__27Dhq"}},,,function(e,t,n){e.exports={Header:"Header_Header__1Mtf7",logo:"Header_logo__3EvUy",headerStripes:"Header_headerStripes__3J_X2",title:"Header_title__3_fub"}},,function(e,t,n){e.exports={RegisterLoginForm:"RegisterLoginForm_RegisterLoginForm__O6GgF",registerBtn:"RegisterLoginForm_registerBtn__OcyVa"}},,function(e,t,n){e.exports={Message:"Message_Message__2PMfH",error:"Message_error__30o9i",info:"Message_info__39PgA",none:"Message_none__18UBm"}},function(e,t,n){e.exports={AdminConsole:"AdminConsole_AdminConsole__18Xtx"}},function(e,t,n){e.exports={Playground:"Playground_Playground__2Wbtb"}},,,,function(e,t,n){e.exports={Btn:"Button_Btn__M02Za"}},function(e,t,n){e.exports={LoginForm:"Login_LoginForm__1Sl1n"}},function(e,t,n){e.exports={AppLogo:"Logo_AppLogo__ASyqM",starotate:"Logo_starotate__3kyPG"}},function(e,t,n){e.exports={UserList:"UserList_UserList__Om7ha"}},function(e,t,n){e.exports={Modal:"Modal_Modal__JzWj5"}},,,,,,function(e,t,n){},,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s,r=n(1),a=n.n(r),o=n(17),c=n.n(o),i=(n(30),n(25)),u=n(2),l=n.n(u),d=n(4),j=n(3),b=n(9),g=n(14),f=n.n(g),p=n(0);function O(e){return Object(p.jsx)("p",{className:"".concat(f.a.Message," ").concat(f.a[e.type]),children:e.msg})}!function(e){e.ERR="error",e.INFO="info",e.NONE="none"}(s||(s={}));var h,m=n(18),x=n(19),_="http://oldstars.ngrok.io";!function(e){e.GET="GET",e.POST="POST",e.DELETE="DELETE",e.HEAD="HEAD",e.OPTIONS="OPTIONS"}(h||(h={}));var L=new Headers;function v(e,t,n){return y.apply(this,arguments)}function y(){return(y=Object(d.a)(l.a.mark((function e(t,n,s){var r,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:t,headers:L,mode:"cors",cache:"default"},t===h.POST&&(r.body=s),e.next=4,fetch("".concat(_,"/").concat(n),r);case 4:return a=e.sent,e.next=7,a.json();case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){var t=e.Ok,n=e.Err;if(t)return t;throw"Ooops... ".concat(n)}L.set("Accept","application/json"),L.set("Content-Type","application/json");var w=function(){function e(){Object(m.a)(this,e)}return Object(x.a)(e,null,[{key:"loginUser",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(h.POST,"login",JSON.stringify(t));case 2:return n=e.sent,s=U(n),e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function N(e){return S.apply(this,arguments)}function S(){return(S=Object(d.a)(l.a.mark((function e(t){var n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(h.POST,"register",JSON.stringify(t));case 2:return n=e.sent,s=U(n),e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return E.apply(this,arguments)}function E(){return(E=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v(h.GET,"all",""));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=n(20),A=n.n(T);function k(e){return Object(p.jsx)("button",{className:"".concat(A.a.Btn," ").concat(e.styles),onClick:e.callback,children:e.text})}var I=n(12),M=n.n(I);function P(e){var t,n=Object(r.useState)(""),a=Object(j.a)(n,2),o=a[0],c=a[1],i=Object(r.useState)(""),u=Object(j.a)(i,2),b=u[0],g=u[1],f=function(){var t=Object(d.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N({name:o,pwd:b});case 3:n=t.sent,e.onRegister(n),c(""),g(""),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.onError(s.ERR,t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("form",{onSubmit:F,className:"".concat(M.a.RegisterLoginForm," ").concat(e.loginType==D.User?e.styles:""),children:[e.loginType===D.User&&Object(p.jsx)("input",{type:"text",placeholder:"user-name",value:o,onChange:function(e){return c(e.target.value)}}),Object(p.jsx)("input",{type:"password",value:b,placeholder:(t=e.loginType,"".concat(D[t]," Password")),onChange:function(e){return g(e.target.value)}}),Object(p.jsx)(k,{text:"Login",styles:M.a.registerBtn,callback:function(){w.loginUser({name:o||R(e.loginType),pwd:b}).then((function(t){var n=function(e){switch(e){case D.User:return B.LoggedInUser;case D.Club:return B.LoggedInClub;case D.Admin:return B.LoggedInAdmin;default:throw"Unhandled loginTyp: ".concat(e,". Cannot evaluate a LoginState")}}(e.loginType);if(e.onLogin(n),c(""),g(""),e.setLoginType(function(e){switch(e){case D.Club:return D.User;case D.User:case D.Admin:return D.None;default:throw"Unsupported LoginType-State"}}(e.loginType)),e.loginType===D.User){if(!e.setSessionUser)throw"login- and setSessionUser callback must be defined";e.setSessionUser(t)}})).catch((function(t){return e.onError(s.ERR,t)}))}}),e.loginType===D.User&&Object(p.jsx)(k,{text:"Register",styles:M.a.registerBtn,callback:f})]})})}function F(e){e.preventDefault()}function R(e){switch(e){case D.Club:return"club";case D.Admin:return"admin";default:throw"Cannot evaluate the Login Name if the userName is undefined"}}var B,D,H=n(21),V=n.n(H);function G(e){var t=Object(r.useState)(""),n=Object(j.a)(t,2),a=n[0],o=n[1],c=Object(r.useState)(s.NONE),i=Object(j.a)(c,2),u=i[0],l=i[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(O,{msg:a,type:u}),Object(p.jsx)(P,Object(b.a)(Object(b.a)({},e),{},{onRegister:function(t){if(!e.onRegister)throw"onRegister must be defined to register a User";o("Registration was successful"),l(s.INFO),e.onRegister(t)},onLogin:function(t){t!==B.LoginError&&(o(""),l(s.NONE)),e.onLogin(t)},onError:function(e,t){o(t),l(e)},styles:V.a.LoginForm}))]})}!function(e){e[e.LoggedInClub=0]="LoggedInClub",e[e.LoggedInAdmin=1]="LoggedInAdmin",e[e.LoggedInUser=2]="LoggedInUser",e[e.LoggedOut=3]="LoggedOut",e[e.LoginError=4]="LoginError"}(B||(B={})),function(e){e[e.Club=0]="Club",e[e.User=1]="User",e[e.Admin=2]="Admin",e[e.None=3]="None"}(D||(D={}));var J=n(22),X=n.n(J);function q(e){return Object(p.jsx)("div",{className:"".concat(X.a.AppLogo," ").concat(e.styles),children:"\u2b50"})}var W=n(10),Z=n.n(W);function z(e){return Object(p.jsxs)("header",{className:Z.a.Header,children:[e.showLogo?Object(p.jsx)(q,{styles:Z.a.logo}):null,Object(p.jsx)("div",{className:"".concat(Z.a.headerStripes," ").concat(e.styles?e.styles.headerStripes:""),children:Object(p.jsx)("h1",{className:"".concat(Z.a.title," ").concat(e.styles?e.styles.title:""),children:"Old-Stars App"})})]})}var K=n(6),Q=n.n(K);function Y(e){return Object(p.jsxs)("tr",{className:Q.a.itemContent,children:[Object(p.jsx)("td",{children:Object(p.jsx)("div",{className:Q.a.userData,children:e.user.name})}),Object(p.jsx)("td",{className:Q.a.count,children:e.user.beerCount}),Object(p.jsx)("td",{className:Q.a.count,children:e.user.shotCount}),Object(p.jsx)("td",{className:Q.a.count,children:e.user.waterCount}),e.isEditable?Object(p.jsx)("td",{children:Object(p.jsx)("button",{className:Q.a.delBtn,onClick:e.deleteGotClicked,children:"\u274c"})}):null]})}var $=n(23),ee=n.n($);function te(e){return Object(p.jsxs)("table",{className:ee.a.UserList,children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{}),Object(p.jsx)("th",{children:"\ud83c\udf7a"}),Object(p.jsx)("th",{children:"\ud83e\udd43"}),Object(p.jsx)("th",{children:"\ud83d\udeb0"})]})}),Object(p.jsx)("tbody",{children:e.users.map((function(t){return Object(p.jsx)(Y,{id:t.id,user:t,isEditable:e.isEditable,deleteGotClicked:function(){return e.onDelete?e.onDelete(t.id):null}},t.id)}))})]})}var ne=n(15),se=n.n(ne);function re(e){var t=Object(r.useState)(""),n=Object(j.a)(t,2),a=n[0],o=(n[1],Object(r.useState)(s.NONE)),c=Object(j.a)(o,2),i=c[0];c[1];return Object(p.jsxs)("div",{className:se.a.AdminConsole,children:[Object(p.jsx)(z,{showLogo:!0}),Object(p.jsx)(te,{users:e.users,isEditable:!0,onDelete:function(t){!function(e){v(h.DELETE,"delete/".concat(e),"")}(t),e.onDelete(t)}}),Object(p.jsx)(O,{msg:a,type:i}),Object(p.jsx)(k,{text:"Home",styles:se.a.Btn,callback:e.navToHome})]})}var ae=n(16),oe=n.n(ae),ce=n(5),ie=n.n(ce);function ue(e){var t=function(){var t=Object(d.a)(l.a.mark((function t(n){var s,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(h.GET,"".concat(n,"/").concat(e.user.id),"");case 2:s=t.sent,r=U(s),e.onUserUpdate(r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:ie.a.User,children:[Object(p.jsx)("p",{className:ie.a.name,children:e.user.name}),Object(p.jsxs)("div",{className:ie.a.statsPanel,children:[Object(p.jsxs)("div",{className:ie.a.icons,children:[Object(p.jsx)("button",{onClick:function(){return t("beer")},className:ie.a.beer,children:"\ud83c\udf7a"}),Object(p.jsx)("button",{onClick:function(){return t("shot")},className:ie.a.shots,children:"\ud83e\udd43"}),Object(p.jsx)("button",{onClick:function(){return t("water")},className:ie.a.water,children:"\ud83d\udeb0"})]}),Object(p.jsxs)("div",{className:ie.a.stats,children:[Object(p.jsx)("p",{className:ie.a.count,children:e.user.beerCount}),Object(p.jsx)("p",{className:ie.a.count,children:e.user.shotCount}),Object(p.jsx)("p",{className:ie.a.count,children:e.user.waterCount})]})]})]})}function le(e){return Object(p.jsxs)("div",{className:oe.a.Playground,children:[Object(p.jsx)(z,{showLogo:!0}),Object(p.jsx)(ue,{user:e.user,onUserUpdate:e.onUserUpdate}),Object(p.jsx)(te,{users:e.users,isEditable:!1}),Object(p.jsx)(k,{text:"logout",styles:oe.a.Btn,callback:e.logout})]})}var de=n(7),je=n.n(de);function be(e){return Object(p.jsx)("div",{className:je.a.Main,children:e.isAdminView?Object(p.jsx)(re,{navToHome:function(){e.setAdminView(!1),e.setLoginType(e.sessionUser?D.None:D.User),e.setLoginState(e.sessionUser?B.LoggedInUser:B.LoggedInClub)},users:e.users,onDelete:e.deleteUser}):Object(p.jsxs)(p.Fragment,{children:[ge(e)&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(z,{showLogo:!1,styles:{headerStripes:je.a.headerStripes,title:je.a.title}}),Object(p.jsx)(q,{styles:je.a.logo})]}),fe(e)&&e.sessionUser?Object(p.jsx)(le,{user:e.sessionUser,users:e.users,logout:e.onLogout,onUserUpdate:e.onUserUpdate}):Object(p.jsx)(G,Object(b.a)({},e)),!e.isAdminView&&Object(p.jsx)(k,{text:"admin",styles:je.a.Btn,callback:function(){return e.openAdminLogin(!0)}})]})})}function ge(e){return!e.isAdminView&&e.loginState!==B.LoggedInUser}function fe(e){return e.loginState===B.LoggedInUser&&e.sessionUser}n(33);var pe=n(24),Oe=n.n(pe);function he(e){return Object(p.jsx)("div",{className:Oe.a.Modal,children:e.children})}var me=function(){var e=Object(r.useState)(B.LoggedOut),t=Object(j.a)(e,2),n=t[0],s=t[1],a=Object(r.useState)(D.Club),o=Object(j.a)(a,2),c=o[0],u=o[1],b=Object(r.useState)(new Array),g=Object(j.a)(b,2),f=g[0],O=g[1],h=Object(r.useState)(),m=Object(j.a)(h,2),x=m[0],_=m[1],L=Object(r.useState)(!1),v=Object(j.a)(L,2),y=v[0],w=v[1],N=Object(r.useState)(!1),S=Object(j.a)(N,2),E=S[0],T=S[1];return Object(r.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:t=e.sent,n=U(t),O(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(be,{isAdminView:E,users:f,sessionUser:x,onRegister:function(e){var t=[].concat(Object(i.a)(f),[e]);O(t)},onLogin:s,loginState:n,setLoginState:s,loginType:c,setLoginType:u,setSessionUser:_,deleteUser:function(e){var t=f.filter((function(t){return t.id!==e}));O(t)},openAdminLogin:w,setAdminView:T,onLogout:function(){s(B.LoggedInClub),u(D.User),_(void 0),T(!1)},onUserUpdate:function(e){var t=f.map((function(t){return t.id===e.id?e:t}));O(t),_(e)}}),y&&Object(p.jsx)(he,{children:Object(p.jsx)(G,{loginType:D.Admin,setLoginType:u,onLogin:function(e){if(e!==B.LoggedInAdmin)throw"Only Admin should be able to log in as admin";s(e),w(!1),T(!0),u(c)}})})]})},xe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,35)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),s(e),r(e),a(e),o(e)}))};c.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(me,{})}),document.getElementById("root")),xe()}],[[34,1,2]]]);
//# sourceMappingURL=main.2fb3765c.chunk.js.map